(this.webpackJsonpmyseed=this.webpackJsonpmyseed||[]).push([[0],{107:function(e,t,n){"use strict";n.r(t),n.d(t,"APP_CONST",(function(){return He})),n.d(t,"history",(function(){return Ve})),n.d(t,"store",(function(){return We}));var r=n(0),a=n(37),o=n.n(a),c=n(23),i=n(20),s=n(276),u=n(436),l=n(41),p=n(148),h=n(263);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(298),n(299),n(300),n(301);var d=n(448),O=n(149),j=Object(O.a)({palette:{primary:{main:"#1976d2"},secondary:{main:"#e91e63"}},overrides:{body:{margin:0}}}),b=n(435),f="APP_BAR_SEARCH";var v=Object(c.b)({search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return t.type===f?t.search:e}}),g=n(66),m="default",y="error",x="SNACKBAR_SEVERITY",_="SNACKBAR_MESSAGE",S="SNACKBAR_IS_OPEN";var E=Object(c.b)({severity:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return t.type===x?t.severity:e},message:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return t.type===_?t.message:e},isOpen:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return t.type===S?t.isOpen:e}}),C="LAYOUT_VISIBLE_STATE",T="FULL_SIZE_CONTENT";var A=Object(c.b)({visible:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;return t.type===C?t.visible:e},fullSizeContent:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;return t.type===T?t.fullSizeContent:e},appBar:v,drawer:g.a,snackBar:E}),I="SEARCH_LOADING",w="SEARCH_RESULT",k="SEARCH_ERROR";var N=Object(c.b)({loading:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return t.type===I?t.loading:e},result:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return t.type===w?t.result:e},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return t.type===k?t.error:e}}),R=Object(c.b)({layout:A,search:N}),L=n(17),P=n(15),B=n(21),F=n(22),D=n(8),z=n(393),K=n(444),G=n(445),Y=n(388),U=n(426),M=n(440),H=n(446),V=n(268),W=n.n(V),q=n(421),J=n(2),X=function(e){Object(B.a)(n,e);var t=Object(F.a)(n);function n(){return Object(L.a)(this,n),t.apply(this,arguments)}return Object(P.a)(n,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.searchValue,r=e.toggleDrawer,a=e.dispatchSearch,o=function(e){Ve.push(e.length>0?"/search/"+e:"/"),a(e)};return Object(J.jsxs)("div",{children:[Object(J.jsx)(K.a,{color:"primary",elevation:0,position:"fixed",className:t.root,children:Object(J.jsxs)(G.a,{children:[Object(J.jsx)(H.a,{color:"inherit",edge:"start","aria-label":"menu",onClick:function(){return r(!0)},children:Object(J.jsx)(W.a,{})}),Object(J.jsx)(Y.a,{className:t.title}),Object(J.jsxs)("div",{className:t.search,children:[Object(J.jsx)("div",{className:t.searchIcon,children:Object(J.jsx)(U.a,{})}),Object(J.jsx)(M.a,{placeholder:"Rechercher...",className:t.searchInput,value:n&&n,inputProps:{"aria-label":"search"},onChange:function(e){return o(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&o(e.target.value)}})]})]})}),Object(J.jsx)(G.a,{})]})}}]),n}(r.Component),Z=Object(i.c)((function(e){return{searchValue:e.app.layout.appBar.search}}),(function(e){return{dispatchSearch:function(t){return e({type:f,search:t})},toggleDrawer:function(t){return e({type:g.b.OPEN,open:t})}}}))(Object(z.a)((function(e){return{root:{flexGrow:1},title:{flexGrow:1},search:Object(D.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(q.a)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(q.a)(e.palette.common.white,.25)},marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},searchInput:{color:"inherit","& .MuiInputBase-input":Object(D.a)({color:e.palette.common.white,padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(6),")"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:"14ch","&:focus":{width:"40ch"}})}}}))(X)),$=n(270),Q=n(49),ee=n(447),te=n(437);function ne(e){return Object(J.jsx)(te.a,Object(Q.a)({elevation:6,variant:"filled"},e))}var re=function(e){Object(B.a)(n,e);var t=Object(F.a)(n);function n(){return Object(L.a)(this,n),t.apply(this,arguments)}return Object(P.a)(n,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.severity,r=e.message,a=e.isOpen,o=e.close,c=function(e,t){"clickaway"!==t&&o()};return Object(J.jsx)(ee.a,{className:t.root,open:a,onClose:c,anchorOrigin:{vertical:"bottom",horizontal:"right"},message:n===m&&r,autoHideDuration:6e3,children:n!==m&&Object(J.jsx)(ne,{onClose:c,severity:n,children:r})})}}]),n}(n(0).Component),ae=Object(i.c)((function(e){return{severity:e.app.layout.snackBar.severity,message:e.app.layout.snackBar.message,isOpen:e.app.layout.snackBar.isOpen}}),(function(e){return{close:function(){return e({type:S,isOpen:!1})}}}))(Object(z.a)((function(e){return{root:Object(D.a)({},e.breakpoints.down("xs"),{display:"block",left:8,top:null,right:8,bottom:8})}}))(re)),oe=n(271),ce=n(67),ie=n(456),se=n(449),ue=n(433),le=n(450),pe=n(451),he=n(452),de=n(394),Oe="a99c487f77d84bf3a88c6cbd671203fd",je="http://localhost:3000/login",be=function(e){Object(B.a)(n,e);var t=Object(F.a)(n);function n(){return Object(L.a)(this,n),t.apply(this,arguments)}return Object(P.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.location,n=e.showError;We.dispatch({type:C,visible:!1}),We.dispatch({type:T,fullSizeContent:!0}),this.props.retry&&ve();var r=fe(t.search.substring(1));r.code&&ge(r.code,n),localStorage.getItem(He.LOCAL_STORAGE.SPOTIFY_TOKEN)&&Ve.push("/")}},{key:"render",value:function(){return Object(J.jsx)(ie.a,{maxWidth:!1,children:Object(J.jsxs)(se.a,{open:!0,"aria-labelledby":"form-dialog-title",children:[Object(J.jsx)(ue.a,{id:"form-dialog-title",children:"Connexion"}),Object(J.jsx)(le.a,{children:Object(J.jsx)(pe.a,{children:"Vous devez vous connecter avec votre compte Spotify pour pouvoir profiter de ce service."})}),Object(J.jsx)(he.a,{children:Object(J.jsx)(de.a,{onClick:ve,color:"primary",children:"Se connecter"})})]})})}}]),n}(r.Component),fe=function(e){return e.split("&").reduce((function(e,t){if(t){var n=t.split("=");e[n[0]]=decodeURIComponent(n[1])}return e}),{})},ve=function(){window.location="https://accounts.spotify.com/authorize?response_type=code&client_id="+Oe+"&scope="+encodeURIComponent("user-read-email user-read-private user-library-read user-follow-read user-top-read user-read-recently-played")+"&redirect_uri="+encodeURIComponent(je)},ge=function(e,t){var n={Authorization:"Basic ".concat(btoa("".concat(Oe,":").concat("9fb02c5fd9034ce3bb576009d5d1a1ee"))),"Content-Type":"application/x-www-form-urlencoded"},r="grant_type=authorization_code&code=".concat(e,"&redirect_uri=").concat(encodeURIComponent(je));fetch("https://accounts.spotify.com/api/token",{method:"post",headers:n,body:r}).then((function(e){return e.json()})).then((function(e){localStorage.setItem(He.LOCAL_STORAGE.SPOTIFY_TOKEN,e.access_token),localStorage.setItem(He.LOCAL_STORAGE.SPOTIFY_REFRESH_TOKEN,e.refresh_token),Ve.push("/")}))},me=Object(i.c)(null,(function(e){return{showError:function(t){e({type:x,severity:y}),e({type:_,message:t}),e({type:S,isOpen:!0})}}}))(Object(z.a)((function(e){return{}}))(be)),ye=n(434),xe=function(e){Object(B.a)(n,e);var t=Object(F.a)(n);function n(){return Object(L.a)(this,n),t.apply(this,arguments)}return Object(P.a)(n,[{key:"componentDidMount",value:function(){localStorage.getItem(He.LOCAL_STORAGE.SPOTIFY_TOKEN)||Ve.push("/login"),We.dispatch({type:C,visible:!0}),We.dispatch({type:T,fullSizeContent:!1})}},{key:"render",value:function(){return Object(J.jsx)(ye.a,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",pt:8})}}]),n}(r.Component),_e=Object(i.c)((function(e){return{token:e.app.token}}),(function(e){return{}}))(Object(z.a)((function(e){return{}}))(xe)),Se=n(443),Ee=n(459),Ce=n(281),Te=n(457),Ae=n(438),Ie=n(458),we=n(79),ke=n.p+"static/media/man_listening_music_in_sleeping.7e55c57d.jpg",Ne=function(e){Object(B.a)(n,e);var t=Object(F.a)(n);function n(){return Object(L.a)(this,n),t.apply(this,arguments)}return Object(P.a)(n,[{key:"render",value:function(){var e=this.props.classes,t=this.props,n=t.color,r=t.opacity;return Object(J.jsx)("div",{className:e.root,style:{background:n,opacity:r}})}}]),n}(r.Component),Re=Object(z.a)((function(e){return{root:{position:"absolute",left:0,top:0,height:"100%",width:"100%",transition:".2s ease",willChange:"opacity"}}}))(Ne),Le=function(e){Object(B.a)(n,e);var t=Object(F.a)(n);function n(e){var r;return Object(L.a)(this,n),(r=t.call(this,e)).state={hover:!1},r}return Object(P.a)(n,[{key:"render",value:function(){var e=this,t=this.props.classes,n=this.props,r=n.name,a=n.avatarUrl,o=this.state,c=o.hover,i=o.detailOpened,s=function(t){e.setState({hover:t})};return Object(J.jsx)(J.Fragment,{children:Object(J.jsx)(Se.a,{item:!0,xs:i?12:6,sm:i?12:4,md:i?12:2,children:Object(J.jsx)(Te.a,{className:t.root,onMouseOver:function(){return s(!0)},onMouseOut:function(){return s(!1)},children:Object(J.jsx)(Ae.a,{className:t.button,children:Object(J.jsxs)(Ie.a,{className:t.media,image:a||ke,children:[Object(J.jsx)(Re,{color:we.a.grey[900],opacity:c?0:.3}),Object(J.jsx)(Y.a,{className:t.content,p:2,children:Object(J.jsx)(Ce.a,{variant:"overline",className:t.name,children:r})})]})})})})})}}]),n}(r.Component),Pe=Object(z.a)((function(e){return{root:{height:150},button:{width:"100%",height:"100%"},media:{width:"100%",height:"100%",textAlign:"initial"},content:{position:"absolute"},name:{color:we.a.grey[50],fontSize:"larger"}}}))(Le),Be=function(e){Object(B.a)(n,e);var t=Object(F.a)(n);function n(){return Object(L.a)(this,n),t.apply(this,arguments)}return Object(P.a)(n,[{key:"componentDidMount",value:function(){localStorage.getItem(He.LOCAL_STORAGE.SPOTIFY_TOKEN)||Ve.push("/login"),We.dispatch({type:C,visible:!0}),We.dispatch({type:T,fullSizeContent:!1});var e=this.props,t=e.searchInput,n=e.location,r=e.dispatchSearch,a=e.requestSeach,o=n.pathname.split("/")[2];void 0!==o&&t!==o?r(o):0===t.length?Ve.push("/"):a(t)}},{key:"componentDidUpdate",value:function(e,t,n){var r=e.searchInput,a=this.props,o=a.searchInput,c=a.requestSeach;0===o.length?Ve.push("/"):r!==o&&c(o)}},{key:"render",value:function(){var e=this.props,t=e.searchLoading,n=e.searchResult,r=n&&n.authors,a=r?Object(J.jsxs)(Y.a,{py:2,children:[Object(J.jsx)(Ce.a,{variant:"h5",gutterBottom:!0,children:"Artistes"}),Object(J.jsx)(Se.a,{container:!0,spacing:2,children:r.map((function(e){var t;return Object(J.jsx)(Pe,{name:e.name,avatarUrl:null===(t=e.largeImg)||void 0===t?void 0:t.url},"artist_"+e.id)}))})]}):"";return Object(J.jsxs)(J.Fragment,{children:[t&&Object(J.jsx)(Ee.a,{color:"secondary"}),Object(J.jsx)(ie.a,{maxWidth:"xl",children:a})]})}}]),n}(r.Component),Fe=Object(i.c)((function(e){return{searchInput:e.app.layout.appBar.search,searchLoading:e.app.search.loading,searchResult:e.app.search.result,searchError:e.app.search.error}}),(function(e){return{dispatchSearch:function(t){return e({type:f,search:t})},requestSeach:function(t){return function(e,t){var n={Authorization:"Bearer ".concat(localStorage.getItem(He.LOCAL_STORAGE.MYFEED_TOKEN)),"Content-Type":"application/json"};e({type:I,loading:!0}),fetch("".concat(He.MYSEED_API_URL,"/search/").concat(t),{method:"get",headers:n}).then((function(e){return e.json()})).then((function(t){"hydra:Error"===t["@type"]?e({type:k,error:t["hydra:description"]?t["hydra:description"]:"Une erreur est survenue."}):e({type:w,result:t}),e({type:I,loading:!1})}))}(e,t)}}}))(Object(z.a)((function(e){}))(Be)),De=["component","authed"];function ze(e){var t=e.component,n=(e.authed,Object(oe.a)(e,De)),r=localStorage.getItem(He.LOCAL_STORAGE.SPOTIFY_TOKEN);return Object(J.jsx)(ce.b,Object(Q.a)(Object(Q.a)({},n),{},{render:function(e){return r?Object(J.jsx)(t,Object(Q.a)({},e)):Object(J.jsx)(ce.a,{to:{pathname:"/login",state:{from:e.location}}})}}))}var Ke=[Object(J.jsx)(ce.b,{path:"/login",component:me},"route_login"),Object(J.jsx)(ze,{path:"/",exact:!0,component:_e},"route_home"),Object(J.jsx)(ze,{path:"/search",component:Fe},"route_search")],Ge=n.p+"static/media/woman_looking_through_records_at_vinyl_shop.a2443996.jpg",Ye=function(e){Object(B.a)(n,e);var t=Object(F.a)(n);function n(){return Object(L.a)(this,n),t.apply(this,arguments)}return Object(P.a)(n,[{key:"render",value:function(){var e=this.props,t=e.layoutVisible,n=e.fullSizeBgImg,r=e.classes;return Object(J.jsxs)("div",{className:n&&r.rootFullSizeBgImg,children:[Object(J.jsx)(ae,{}),t&&Object(J.jsxs)("div",{children:[Object(J.jsx)(Z,{}),Object(J.jsx)($.a,{})]}),Object(J.jsx)(ce.d,{children:Ke})]})}}]),n}(r.Component),Ue=Object(i.c)((function(e){return{layoutVisible:e.app.layout.visible}}),null)(Object(z.a)((function(){return{rootFullSizeBgImg:{height:"100vh",backgroundImage:"url("+Ge+")",backgroundPosition:"center center",backgroundRepeat:"no-repeat",backgroundAttachment:"fixed",backgroundSize:"cover"}}}))(Ye)),Me="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__||c.c,He={LOCAL_STORAGE:{SPOTIFY_TOKEN:"APP_CONST_LOCAL_STORAGE_SPOTIFY_TOKEN",SPOTIFY_REFRESH_TOKEN:"APP_CONST_LOCAL_STORAGE_SPOTIFY_REFRESH_TOKEN"}},Ve=Object(l.a)(),We=Object(c.d)(Object(c.b)({app:R,router:Object(p.b)(Ve),form:u.a,composeEnhancers:Me}),Object(c.a)(Object(h.a)(Ve),s.a));o.a.render(Object(J.jsx)(i.a,{store:We,children:Object(J.jsxs)(p.a,{history:Ve,children:[Object(J.jsx)(b.a,{}),Object(J.jsx)(d.a,{theme:j,children:Object(J.jsx)(Ue,{})})]})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},270:function(e,t,n){"use strict";(function(e){var r=n(17),a=n(15),o=n(21),c=n(22),i=n(397),s=n(388),u=n(0),l=n(394),p=n(398),h=n(395),d=n(399),O=n(400),j=n(281),b=n(393),f=n(392),v=n(20),g=n(66),m=n(107),y=n(2),x=e.browser&&/iPad|iPhone|iPod/.test(navigator.userAgent),_=function(e){Object(o.a)(n,e);var t=Object(c.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.open,r=e.toggle,a=function(e){m.history.push(),r(!1)};return Object(y.jsxs)(i.a,{disableBackdropTransition:!x,disableDiscovery:x,anchor:"left",open:n,onOpen:function(){return r(!0)},onClose:function(){return r(!1)},children:[Object(y.jsxs)(s.a,{bgcolor:"primary.main",color:"primary.contrastText",className:t.header,children:[Object(y.jsx)(j.a,{variant:"h6",gutterBottom:!0,children:"MySeed"}),Object(y.jsx)(l.a,{variant:"outlined",color:"inherit",onClick:function(){localStorage.removeItem(m.APP_CONST.LOCAL_STORAGE.SPOTIFY_TOKEN),a()},children:"D\xe9connexion"})]}),Object(y.jsx)(p.a,{className:t.menu,children:Object(y.jsxs)(h.a,{button:!0,onClick:function(){return a()},children:[Object(y.jsx)(d.a,{children:Object(y.jsx)(f.a,{color:"inherit"})}),Object(y.jsx)(O.a,{primary:"Accueil"})]},"drawer_home")})]})}}]),n}(u.Component);t.a=Object(v.c)((function(e){return{open:e.app.layout.drawer.open}}),(function(e){return{toggle:function(t){return e({type:g.b.OPEN,open:t})}}}))(Object(b.a)((function(e){return{header:{height:275,display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",boxShadow:"inset 0 0 0 2000px rgba(0, 0, 0, 0.3)"},menu:{width:250}}}))(_))}).call(this,n(305))},66:function(e,t,n){"use strict";n.d(t,"b",(function(){return a}));var r=n(23),a={OPEN:"DRAWER_OPEN_STATE"};t.a=Object(r.b)({open:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return t.type===a.OPEN?t.open:e}})}},[[107,1,2]]]);
//# sourceMappingURL=main.d57600f8.chunk.js.map