(this.webpackJsonpmyseed=this.webpackJsonpmyseed||[]).push([[0],{107:function(e,t,n){"use strict";n.r(t),n.d(t,"APP_CONST",(function(){return Ve})),n.d(t,"history",(function(){return qe})),n.d(t,"store",(function(){return Je}));var r=n(0),o=n(37),a=n.n(o),c=n(23),i=n(20),s=n(276),u=n(436),l=n(41),h=n(148),p=n(263),d=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function O(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}n(298),n(299),n(300),n(301);var j=n(448),b=n(149),f=Object(b.a)({palette:{primary:{main:"#1976d2"},secondary:{main:"#e91e63"}},overrides:{body:{margin:0}}}),v=n(435),g="APP_BAR_SEARCH";var m=Object(c.b)({search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return t.type===g?t.search:e}}),y=n(66),x="default",S="error",_="SNACKBAR_SEVERITY",E="SNACKBAR_MESSAGE",w="SNACKBAR_IS_OPEN";var C=Object(c.b)({severity:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return t.type===_?t.severity:e},message:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return t.type===E?t.message:e},isOpen:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return t.type===w?t.isOpen:e}}),A="LAYOUT_VISIBLE_STATE",T="FULL_SIZE_CONTENT";var k=Object(c.b)({visible:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;return t.type===A?t.visible:e},fullSizeContent:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;return t.type===T?t.fullSizeContent:e},appBar:m,drawer:y.a,snackBar:C}),I="SEARCH_LOADING",N="SEARCH_RESULT",R="SEARCH_ERROR";var L=Object(c.b)({loading:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return t.type===I?t.loading:e},result:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return t.type===N?t.result:e},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return t.type===R?t.error:e}}),P=Object(c.b)({layout:k,search:L}),B=n(17),F=n(15),D=n(21),z=n(22),K=n(8),U=n(393),G=n(444),Y=n(445),W=n(388),M=n(426),H=n(440),V=n(446),q=n(268),J=n.n(q),X=n(421),Z=n(2),$=function(e){Object(D.a)(n,e);var t=Object(z.a)(n);function n(){return Object(B.a)(this,n),t.apply(this,arguments)}return Object(F.a)(n,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.searchValue,r=e.toggleDrawer,o=e.dispatchSearch,a=function(e){qe.push(e.length>0?"/search/"+e:"/"),o(e)};return Object(Z.jsxs)("div",{children:[Object(Z.jsx)(G.a,{color:"primary",elevation:0,position:"fixed",className:t.root,children:Object(Z.jsxs)(Y.a,{children:[Object(Z.jsx)(V.a,{color:"inherit",edge:"start","aria-label":"menu",onClick:function(){return r(!0)},children:Object(Z.jsx)(J.a,{})}),Object(Z.jsx)(W.a,{className:t.title}),Object(Z.jsxs)("div",{className:t.search,children:[Object(Z.jsx)("div",{className:t.searchIcon,children:Object(Z.jsx)(M.a,{})}),Object(Z.jsx)(H.a,{placeholder:"Rechercher...",className:t.searchInput,value:n&&n,inputProps:{"aria-label":"search"},onChange:function(e){return a(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&a(e.target.value)}})]})]})}),Object(Z.jsx)(Y.a,{})]})}}]),n}(r.Component),Q=Object(i.c)((function(e){return{searchValue:e.app.layout.appBar.search}}),(function(e){return{dispatchSearch:function(t){return e({type:g,search:t})},toggleDrawer:function(t){return e({type:y.b.OPEN,open:t})}}}))(Object(U.a)((function(e){return{root:{flexGrow:1},title:{flexGrow:1},search:Object(K.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(X.a)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(X.a)(e.palette.common.white,.25)},marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},searchInput:{color:"inherit","& .MuiInputBase-input":Object(K.a)({color:e.palette.common.white,padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(6),")"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:"14ch","&:focus":{width:"40ch"}})}}}))($)),ee=n(270),te=n(49),ne=n(447),re=n(437);function oe(e){return Object(Z.jsx)(re.a,Object(te.a)({elevation:6,variant:"filled"},e))}var ae=function(e){Object(D.a)(n,e);var t=Object(z.a)(n);function n(){return Object(B.a)(this,n),t.apply(this,arguments)}return Object(F.a)(n,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.severity,r=e.message,o=e.isOpen,a=e.close,c=function(e,t){"clickaway"!==t&&a()};return Object(Z.jsx)(ne.a,{className:t.root,open:o,onClose:c,anchorOrigin:{vertical:"bottom",horizontal:"right"},message:n===x&&r,autoHideDuration:6e3,children:n!==x&&Object(Z.jsx)(oe,{onClose:c,severity:n,children:r})})}}]),n}(n(0).Component),ce=Object(i.c)((function(e){return{severity:e.app.layout.snackBar.severity,message:e.app.layout.snackBar.message,isOpen:e.app.layout.snackBar.isOpen}}),(function(e){return{close:function(){return e({type:w,isOpen:!1})}}}))(Object(U.a)((function(e){return{root:Object(K.a)({},e.breakpoints.down("xs"),{display:"block",left:8,top:null,right:8,bottom:8})}}))(ae)),ie=n(271),se=n(67),ue=n(456),le=n(449),he=n(433),pe=n(450),de=n(451),Oe=n(452),je=n(394),be="a99c487f77d84bf3a88c6cbd671203fd",fe="http://localhost:3000/login",ve=function(e){Object(D.a)(n,e);var t=Object(z.a)(n);function n(){return Object(B.a)(this,n),t.apply(this,arguments)}return Object(F.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.location,n=e.showError;Je.dispatch({type:A,visible:!1}),Je.dispatch({type:T,fullSizeContent:!0}),this.props.retry&&me();var r=ge(t.search.substring(1));r.code&&ye(r.code,n),localStorage.getItem(Ve.LOCAL_STORAGE.SPOTIFY_TOKEN)&&qe.push("/")}},{key:"render",value:function(){return Object(Z.jsx)(ue.a,{maxWidth:!1,children:Object(Z.jsxs)(le.a,{open:!0,"aria-labelledby":"form-dialog-title",children:[Object(Z.jsx)(he.a,{id:"form-dialog-title",children:"Connexion"}),Object(Z.jsx)(pe.a,{children:Object(Z.jsx)(de.a,{children:"Vous devez vous connecter avec votre compte Spotify pour pouvoir profiter de ce service."})}),Object(Z.jsx)(Oe.a,{children:Object(Z.jsx)(je.a,{onClick:me,color:"primary",children:"Se connecter"})})]})})}}]),n}(r.Component),ge=function(e){return e.split("&").reduce((function(e,t){if(t){var n=t.split("=");e[n[0]]=decodeURIComponent(n[1])}return e}),{})},me=function(){window.location="https://accounts.spotify.com/authorize?response_type=code&client_id="+be+"&scope="+encodeURIComponent("user-read-email user-read-private user-library-read user-follow-read user-top-read user-read-recently-played")+"&redirect_uri="+encodeURIComponent(fe)},ye=function(e,t){var n={Authorization:"Basic ".concat(btoa("".concat(be,":").concat("9fb02c5fd9034ce3bb576009d5d1a1ee"))),"Content-Type":"application/x-www-form-urlencoded"},r="grant_type=authorization_code&code=".concat(e,"&redirect_uri=").concat(encodeURIComponent(fe));fetch("https://accounts.spotify.com/api/token",{method:"post",headers:n,body:r}).then((function(e){return e.json()})).then((function(e){localStorage.setItem(Ve.LOCAL_STORAGE.SPOTIFY_TOKEN,e.access_token),localStorage.setItem(Ve.LOCAL_STORAGE.SPOTIFY_REFRESH_TOKEN,e.refresh_token),qe.push("/")}))},xe=Object(i.c)(null,(function(e){return{showError:function(t){e({type:_,severity:S}),e({type:E,message:t}),e({type:w,isOpen:!0})}}}))(Object(U.a)((function(e){return{}}))(ve)),Se=n(434),_e=function(e){Object(D.a)(n,e);var t=Object(z.a)(n);function n(){return Object(B.a)(this,n),t.apply(this,arguments)}return Object(F.a)(n,[{key:"componentDidMount",value:function(){localStorage.getItem(Ve.LOCAL_STORAGE.SPOTIFY_TOKEN)||qe.push("/login"),Je.dispatch({type:A,visible:!0}),Je.dispatch({type:T,fullSizeContent:!1})}},{key:"render",value:function(){return Object(Z.jsx)(Se.a,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",pt:8})}}]),n}(r.Component),Ee=Object(i.c)((function(e){return{token:e.app.token}}),(function(e){return{}}))(Object(U.a)((function(e){return{}}))(_e)),we=n(443),Ce=n(459),Ae=n(281),Te=n(457),ke=n(438),Ie=n(458),Ne=n(79),Re=n.p+"static/media/man_listening_music_in_sleeping.7e55c57d.jpg",Le=function(e){Object(D.a)(n,e);var t=Object(z.a)(n);function n(){return Object(B.a)(this,n),t.apply(this,arguments)}return Object(F.a)(n,[{key:"render",value:function(){var e=this.props.classes,t=this.props,n=t.color,r=t.opacity;return Object(Z.jsx)("div",{className:e.root,style:{background:n,opacity:r}})}}]),n}(r.Component),Pe=Object(U.a)((function(e){return{root:{position:"absolute",left:0,top:0,height:"100%",width:"100%",transition:".2s ease",willChange:"opacity"}}}))(Le),Be=function(e){Object(D.a)(n,e);var t=Object(z.a)(n);function n(e){var r;return Object(B.a)(this,n),(r=t.call(this,e)).state={hover:!1},r}return Object(F.a)(n,[{key:"render",value:function(){var e=this,t=this.props.classes,n=this.props,r=n.name,o=n.avatarUrl,a=this.state,c=a.hover,i=a.detailOpened,s=function(t){e.setState({hover:t})};return Object(Z.jsx)(Z.Fragment,{children:Object(Z.jsx)(we.a,{item:!0,xs:i?12:6,sm:i?12:4,md:i?12:2,children:Object(Z.jsx)(Te.a,{className:t.root,onMouseOver:function(){return s(!0)},onMouseOut:function(){return s(!1)},children:Object(Z.jsx)(ke.a,{className:t.button,children:Object(Z.jsxs)(Ie.a,{className:t.media,image:o||Re,children:[Object(Z.jsx)(Pe,{color:Ne.a.grey[900],opacity:c?0:.3}),Object(Z.jsx)(W.a,{className:t.content,p:2,children:Object(Z.jsx)(Ae.a,{variant:"overline",className:t.name,children:r})})]})})})})})}}]),n}(r.Component),Fe=Object(U.a)((function(e){return{root:{height:150},button:{width:"100%",height:"100%"},media:{width:"100%",height:"100%",textAlign:"initial"},content:{position:"absolute"},name:{color:Ne.a.grey[50],fontSize:"larger"}}}))(Be),De=function(e){Object(D.a)(n,e);var t=Object(z.a)(n);function n(){return Object(B.a)(this,n),t.apply(this,arguments)}return Object(F.a)(n,[{key:"componentDidMount",value:function(){localStorage.getItem(Ve.LOCAL_STORAGE.SPOTIFY_TOKEN)||qe.push("/login"),Je.dispatch({type:A,visible:!0}),Je.dispatch({type:T,fullSizeContent:!1});var e=this.props,t=e.searchInput,n=e.location,r=e.dispatchSearch,o=e.requestSeach,a=n.pathname.split("/")[2];void 0!==a&&t!==a?r(a):0===t.length?qe.push("/"):o(t)}},{key:"componentDidUpdate",value:function(e,t,n){var r=e.searchInput,o=this.props,a=o.searchInput,c=o.requestSeach;0===a.length?qe.push("/"):r!==a&&c(a)}},{key:"render",value:function(){var e=this.props,t=e.searchLoading,n=e.searchResult,r=n&&n.authors,o=r?Object(Z.jsxs)(W.a,{py:2,children:[Object(Z.jsx)(Ae.a,{variant:"h5",gutterBottom:!0,children:"Artistes"}),Object(Z.jsx)(we.a,{container:!0,spacing:2,children:r.map((function(e){var t;return Object(Z.jsx)(Fe,{name:e.name,avatarUrl:null===(t=e.largeImg)||void 0===t?void 0:t.url},"artist_"+e.id)}))})]}):"";return Object(Z.jsxs)(Z.Fragment,{children:[t&&Object(Z.jsx)(Ce.a,{color:"secondary"}),Object(Z.jsx)(ue.a,{maxWidth:"xl",children:o})]})}}]),n}(r.Component),ze=Object(i.c)((function(e){return{searchInput:e.app.layout.appBar.search,searchLoading:e.app.search.loading,searchResult:e.app.search.result,searchError:e.app.search.error}}),(function(e){return{dispatchSearch:function(t){return e({type:g,search:t})},requestSeach:function(t){return function(e,t){var n={Authorization:"Bearer ".concat(localStorage.getItem(Ve.LOCAL_STORAGE.MYFEED_TOKEN)),"Content-Type":"application/json"};e({type:I,loading:!0}),fetch("".concat(Ve.MYSEED_API_URL,"/search/").concat(t),{method:"get",headers:n}).then((function(e){return e.json()})).then((function(t){"hydra:Error"===t["@type"]?e({type:R,error:t["hydra:description"]?t["hydra:description"]:"Une erreur est survenue."}):e({type:N,result:t}),e({type:I,loading:!1})}))}(e,t)}}}))(Object(U.a)((function(e){}))(De)),Ke=["component","authed"];function Ue(e){var t=e.component,n=(e.authed,Object(ie.a)(e,Ke)),r=localStorage.getItem(Ve.LOCAL_STORAGE.SPOTIFY_TOKEN);return Object(Z.jsx)(se.b,Object(te.a)(Object(te.a)({},n),{},{render:function(e){return r?Object(Z.jsx)(t,Object(te.a)({},e)):Object(Z.jsx)(se.a,{to:{pathname:"/login",state:{from:e.location}}})}}))}var Ge=[Object(Z.jsx)(se.b,{path:"/login",component:xe},"route_login"),Object(Z.jsx)(Ue,{path:"/",exact:!0,component:Ee},"route_home"),Object(Z.jsx)(Ue,{path:"/search",component:ze},"route_search")],Ye=n.p+"static/media/woman_looking_through_records_at_vinyl_shop.a2443996.jpg",We=function(e){Object(D.a)(n,e);var t=Object(z.a)(n);function n(){return Object(B.a)(this,n),t.apply(this,arguments)}return Object(F.a)(n,[{key:"render",value:function(){var e=this.props,t=e.layoutVisible,n=e.fullSizeBgImg,r=e.classes;return Object(Z.jsxs)("div",{className:n&&r.rootFullSizeBgImg,children:[Object(Z.jsx)(ce,{}),t&&Object(Z.jsxs)("div",{children:[Object(Z.jsx)(Q,{}),Object(Z.jsx)(ee.a,{})]}),Object(Z.jsx)(se.d,{children:Ge})]})}}]),n}(r.Component),Me=Object(i.c)((function(e){return{layoutVisible:e.app.layout.visible}}),null)(Object(U.a)((function(){return{rootFullSizeBgImg:{height:"100vh",backgroundImage:"url("+Ye+")",backgroundPosition:"center center",backgroundRepeat:"no-repeat",backgroundAttachment:"fixed",backgroundSize:"cover"}}}))(We)),He="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__||c.c,Ve={LOCAL_STORAGE:{SPOTIFY_TOKEN:"APP_CONST_LOCAL_STORAGE_SPOTIFY_TOKEN",SPOTIFY_REFRESH_TOKEN:"APP_CONST_LOCAL_STORAGE_SPOTIFY_REFRESH_TOKEN"}},qe=Object(l.a)(),Je=Object(c.d)(Object(c.b)({app:P,router:Object(h.b)(qe),form:u.a,composeEnhancers:He}),Object(c.a)(Object(p.a)(qe),s.a));a.a.render(Object(Z.jsx)(i.a,{store:Je,children:Object(Z.jsxs)(h.a,{history:qe,children:[Object(Z.jsx)(v.a,{}),Object(Z.jsx)(j.a,{theme:f,children:Object(Z.jsx)(Me,{})})]})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");d?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):O(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):O(t,e)}))}}()},270:function(e,t,n){"use strict";(function(e){var r=n(17),o=n(15),a=n(21),c=n(22),i=n(397),s=n(388),u=n(0),l=n(394),h=n(398),p=n(395),d=n(399),O=n(400),j=n(281),b=n(393),f=n(392),v=n(20),g=n(66),m=n(107),y=n(2),x=e.browser&&/iPad|iPhone|iPod/.test(navigator.userAgent),S=function(e){Object(a.a)(n,e);var t=Object(c.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.open,r=e.toggle,o=function(e){m.history.push(e),r(!1)};return Object(y.jsxs)(i.a,{disableBackdropTransition:!x,disableDiscovery:x,anchor:"left",open:n,onOpen:function(){return r(!0)},onClose:function(){return r(!1)},children:[Object(y.jsxs)(s.a,{bgcolor:"primary.main",color:"primary.contrastText",className:t.header,children:[Object(y.jsx)(j.a,{variant:"h6",gutterBottom:!0,children:"MySeed"}),Object(y.jsx)(l.a,{variant:"outlined",color:"inherit",onClick:function(){localStorage.removeItem(m.APP_CONST.LOCAL_STORAGE.SPOTIFY_TOKEN),o("/login")},children:"D\xe9connexion"})]}),Object(y.jsx)(h.a,{className:t.menu,children:Object(y.jsxs)(p.a,{button:!0,onClick:function(){return o("/")},children:[Object(y.jsx)(d.a,{children:Object(y.jsx)(f.a,{color:"inherit"})}),Object(y.jsx)(O.a,{primary:"Accueil"})]},"drawer_home")})]})}}]),n}(u.Component);t.a=Object(v.c)((function(e){return{open:e.app.layout.drawer.open}}),(function(e){return{toggle:function(t){return e({type:g.b.OPEN,open:t})}}}))(Object(b.a)((function(e){return{header:{height:275,display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",boxShadow:"inset 0 0 0 2000px rgba(0, 0, 0, 0.3)"},menu:{width:250}}}))(S))}).call(this,n(305))},66:function(e,t,n){"use strict";n.d(t,"b",(function(){return o}));var r=n(23),o={OPEN:"DRAWER_OPEN_STATE"};t.a=Object(r.b)({open:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return t.type===o.OPEN?t.open:e}})}},[[107,1,2]]]);
//# sourceMappingURL=main.4d6a9bc0.chunk.js.map