(this.webpackJsonpmyseed=this.webpackJsonpmyseed||[]).push([[0],{273:function(e,t,n){"use strict";(function(e){var r=n(17),a=n(15),o=n(21),c=n(22),i=n(406),s=n(398),u=n(0),l=n(286),p=n(407),h=n(404),d=n(408),O=n(409),b=n(287),j=n(285),f=n(402),v=n(20),m=n(70),g=n(33),y=n(2),S=e.browser&&/iPad|iPhone|iPod/.test(navigator.userAgent),_=function(e){Object(o.a)(n,e);var t=Object(c.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.open,r=e.toggle,a=function(e){g.history.push(),r(!1)};return Object(y.jsxs)(i.a,{disableBackdropTransition:!S,disableDiscovery:S,anchor:"left",open:n,onOpen:function(){return r(!0)},onClose:function(){return r(!1)},children:[Object(y.jsxs)(s.a,{bgcolor:"primary.main",color:"primary.contrastText",className:t.header,children:[Object(y.jsx)(b.a,{variant:"h6",gutterBottom:!0,children:"MySeed"}),Object(y.jsx)(l.a,{variant:"outlined",color:"inherit",onClick:function(){localStorage.removeItem(g.APP_CONST.LOCAL_STORAGE.SPOTIFY_TOKEN),a()},children:"D\xe9connexion"})]}),Object(y.jsx)(p.a,{className:t.menu,children:Object(y.jsxs)(h.a,{button:!0,onClick:function(){return a()},children:[Object(y.jsx)(d.a,{children:Object(y.jsx)(f.a,{color:"inherit"})}),Object(y.jsx)(O.a,{primary:"Accueil"})]},"drawer_home")})]})}}]),n}(u.Component);t.a=Object(v.c)((function(e){return{open:e.app.layout.drawer.open}}),(function(e){return{toggle:function(t){return e({type:m.b.OPEN,open:t})}}}))(Object(j.a)((function(e){return{header:{height:275,display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",boxShadow:"inset 0 0 0 2000px rgba(0, 0, 0, 0.3)"},menu:{width:250}}}))(_))}).call(this,n(311))},275:function(e,t,n){"use strict";(function(e){var r=n(17),a=n(15),o=n(21),c=n(22),i=n(0),s=n(20),u=n(414),l=n(285),p=n(410),h=n(403),d=n(411),O=n(412),b=n(413),j=n(286),f=n(37),v=n(33),m=n(39),g=n(2),y="a99c487f77d84bf3a88c6cbd671203fd",S="%PUBLIC_URL%/login",_=function(e){Object(o.a)(n,e);var t=Object(c.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.location,n=e.showError;v.store.dispatch({type:f.b.VISIBLE,visible:!1}),v.store.dispatch({type:f.b.FULL_SIZE_CONTENT,fullSizeContent:!0}),this.props.retry&&E();var r=x(t.search.substring(1));r.code&&C(r.code,n),localStorage.getItem(v.APP_CONST.LOCAL_STORAGE.SPOTIFY_TOKEN)&&v.history.push("/")}},{key:"render",value:function(){return Object(g.jsx)(u.a,{maxWidth:!1,children:Object(g.jsxs)(p.a,{open:!0,"aria-labelledby":"form-dialog-title",children:[Object(g.jsx)(h.a,{id:"form-dialog-title",children:"Connexion"}),Object(g.jsx)(d.a,{children:Object(g.jsx)(O.a,{children:"Vous devez vous connecter avec votre compte Spotify pour pouvoir profiter de ce service."})}),Object(g.jsx)(b.a,{children:Object(g.jsx)(j.a,{onClick:E,color:"primary",children:"Se connecter"})})]})})}}]),n}(i.Component),x=function(e){return e.split("&").reduce((function(e,t){if(t){var n=t.split("=");e[n[0]]=decodeURIComponent(n[1])}return e}),{})},E=function(){window.location="https://accounts.spotify.com/authorize?response_type=code&client_id="+y+"&scope="+encodeURIComponent("user-read-email user-read-private user-library-read user-follow-read user-top-read user-read-recently-played")+"&redirect_uri="+encodeURIComponent(S)},C=function(t,n){var r={Authorization:"Basic ".concat(e.from("".concat(y,":").concat("9fb02c5fd9034ce3bb576009d5d1a1ee"),"base64")),"Content-Type":"application/x-www-form-urlencoded"},a="grant_type=authorization_code&code=".concat(t,"&redirect_uri=").concat(encodeURIComponent(S));fetch("https://accounts.spotify.com/api/token",{method:"post",headers:r,body:a}).then((function(e){return e.json()})).then((function(e){localStorage.setItem(v.APP_CONST.LOCAL_STORAGE.SPOTIFY_TOKEN,e.access_token),localStorage.setItem(v.APP_CONST.LOCAL_STORAGE.SPOTIFY_REFRESH_TOKEN,e.refresh_token),v.history.push("/")}))};t.a=Object(s.c)(null,(function(e){return{showError:function(t){e({type:m.c.severity,severity:m.b.error}),e({type:m.c.message,message:t}),e({type:m.c.isOpen,isOpen:!0})}}}))(Object(l.a)((function(e){return{}}))(_))}).call(this,n(312).Buffer)},33:function(e,t,n){"use strict";n.r(t),n.d(t,"APP_CONST",(function(){return Ee})),n.d(t,"history",(function(){return Ce})),n.d(t,"store",(function(){return Te}));var r=n(0),a=n(40),o=n.n(a),c=n(23),i=n(20),s=n(280),u=n(449),l=n(44),p=n(151),h=n(266);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(304),n(305),n(306),n(307);var d=n(461),O=n(152),b=Object(O.a)({palette:{primary:{main:"#1976d2"},secondary:{main:"#e91e63"}},overrides:{body:{margin:0}}}),j=n(448),f=n(37),v="SEARCH_LOADING",m="SEARCH_RESULT",g="SEARCH_ERROR";var y=Object(c.b)({loading:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return t.type===v?t.loading:e},result:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return t.type===m?t.result:e},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return t.type===g?t.error:e}}),S=Object(c.b)({layout:f.a,search:y}),_=n(17),x=n(15),E=n(21),C=n(22),T=n(8),I=n(285),A=n(457),N=n(458),L=n(398),R=n(440),w=n(453),k=n(459),P=n(271),B=n.n(P),F=n(70),U=n(69),D=n(435),z=n(2),K=function(e){Object(E.a)(n,e);var t=Object(C.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return Object(x.a)(n,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.searchValue,r=e.toggleDrawer,a=e.dispatchSearch,o=function(e){Ce.push(e.length>0?"/search/"+e:"/"),a(e)};return Object(z.jsxs)("div",{children:[Object(z.jsx)(A.a,{color:"primary",elevation:0,position:"fixed",className:t.root,children:Object(z.jsxs)(N.a,{children:[Object(z.jsx)(k.a,{color:"inherit",edge:"start","aria-label":"menu",onClick:function(){return r(!0)},children:Object(z.jsx)(B.a,{})}),Object(z.jsx)(L.a,{className:t.title}),Object(z.jsxs)("div",{className:t.search,children:[Object(z.jsx)("div",{className:t.searchIcon,children:Object(z.jsx)(R.a,{})}),Object(z.jsx)(w.a,{placeholder:"Rechercher...",className:t.searchInput,value:n&&n,inputProps:{"aria-label":"search"},onChange:function(e){return o(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&o(e.target.value)}})]})]})}),Object(z.jsx)(N.a,{})]})}}]),n}(r.Component),G=Object(i.c)((function(e){return{searchValue:e.app.layout.appBar.search}}),(function(e){return{dispatchSearch:function(t){return e({type:U.a.SEARCH,search:t})},toggleDrawer:function(t){return e({type:F.b.OPEN,open:t})}}}))(Object(I.a)((function(e){return{root:{flexGrow:1},title:{flexGrow:1},search:Object(T.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(D.a)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(D.a)(e.palette.common.white,.25)},marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},searchInput:{color:"inherit","& .MuiInputBase-input":Object(T.a)({color:e.palette.common.white,padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(6),")"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:"14ch","&:focus":{width:"40ch"}})}}}))(K)),Y=n(273),V=n(52),H=n(460),M=n(39),Z=n(450);function W(e){return Object(z.jsx)(Z.a,Object(V.a)({elevation:6,variant:"filled"},e))}var q=function(e){Object(E.a)(n,e);var t=Object(C.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return Object(x.a)(n,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.severity,r=e.message,a=e.isOpen,o=e.close,c=function(e,t){"clickaway"!==t&&o()};return Object(z.jsx)(H.a,{className:t.root,open:a,onClose:c,anchorOrigin:{vertical:"bottom",horizontal:"right"},message:n===M.b.default&&r,autoHideDuration:6e3,children:n!==M.b.default&&Object(z.jsx)(W,{onClose:c,severity:n,children:r})})}}]),n}(n(0).Component),J=Object(i.c)((function(e){return{severity:e.app.layout.snackBar.severity,message:e.app.layout.snackBar.message,isOpen:e.app.layout.snackBar.isOpen}}),(function(e){return{close:function(){return e({type:M.c.isOpen,isOpen:!1})}}}))(Object(I.a)((function(e){return{root:Object(T.a)({},e.breakpoints.down("xs"),{display:"block",left:8,top:null,right:8,bottom:8})}}))(q)),X=n(274),$=n(71),Q=n(275),ee=n(447),te=function(e){Object(E.a)(n,e);var t=Object(C.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return Object(x.a)(n,[{key:"componentDidMount",value:function(){localStorage.getItem(Ee.LOCAL_STORAGE.SPOTIFY_TOKEN)||Ce.push("/login"),Te.dispatch({type:f.b.VISIBLE,visible:!0}),Te.dispatch({type:f.b.FULL_SIZE_CONTENT,fullSizeContent:!1})}},{key:"render",value:function(){return Object(z.jsx)(ee.a,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",pt:8})}}]),n}(r.Component),ne=Object(i.c)((function(e){return{token:e.app.token}}),(function(e){return{}}))(Object(I.a)((function(e){return{}}))(te)),re=n(456),ae=n(467),oe=n(414),ce=n(287),ie=n(465),se=n(451),ue=n(466),le=n(83),pe=n.p+"static/media/man_listening_music_in_sleeping.7e55c57d.jpg",he=function(e){Object(E.a)(n,e);var t=Object(C.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return Object(x.a)(n,[{key:"render",value:function(){var e=this.props.classes,t=this.props,n=t.color,r=t.opacity;return Object(z.jsx)("div",{className:e.root,style:{background:n,opacity:r}})}}]),n}(r.Component),de=Object(I.a)((function(e){return{root:{position:"absolute",left:0,top:0,height:"100%",width:"100%",transition:".2s ease",willChange:"opacity"}}}))(he),Oe=function(e){Object(E.a)(n,e);var t=Object(C.a)(n);function n(e){var r;return Object(_.a)(this,n),(r=t.call(this,e)).state={hover:!1},r}return Object(x.a)(n,[{key:"render",value:function(){var e=this,t=this.props.classes,n=this.props,r=n.name,a=n.avatarUrl,o=this.state,c=o.hover,i=o.detailOpened,s=function(t){e.setState({hover:t})};return Object(z.jsx)(z.Fragment,{children:Object(z.jsx)(re.a,{item:!0,xs:i?12:6,sm:i?12:4,md:i?12:2,children:Object(z.jsx)(ie.a,{className:t.root,onMouseOver:function(){return s(!0)},onMouseOut:function(){return s(!1)},children:Object(z.jsx)(se.a,{className:t.button,children:Object(z.jsxs)(ue.a,{className:t.media,image:a||pe,children:[Object(z.jsx)(de,{color:le.a.grey[900],opacity:c?0:.3}),Object(z.jsx)(L.a,{className:t.content,p:2,children:Object(z.jsx)(ce.a,{variant:"overline",className:t.name,children:r})})]})})})})})}}]),n}(r.Component),be=Object(I.a)((function(e){return{root:{height:150},button:{width:"100%",height:"100%"},media:{width:"100%",height:"100%",textAlign:"initial"},content:{position:"absolute"},name:{color:le.a.grey[50],fontSize:"larger"}}}))(Oe),je=function(e){Object(E.a)(n,e);var t=Object(C.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return Object(x.a)(n,[{key:"componentDidMount",value:function(){localStorage.getItem(Ee.LOCAL_STORAGE.SPOTIFY_TOKEN)||Ce.push("/login"),Te.dispatch({type:f.b.VISIBLE,visible:!0}),Te.dispatch({type:f.b.FULL_SIZE_CONTENT,fullSizeContent:!1});var e=this.props,t=e.searchInput,n=e.location,r=e.dispatchSearch,a=e.requestSeach,o=n.pathname.split("/")[2];void 0!==o&&t!==o?r(o):0===t.length?Ce.push("/"):a(t)}},{key:"componentDidUpdate",value:function(e,t,n){var r=e.searchInput,a=this.props,o=a.searchInput,c=a.requestSeach;0===o.length?Ce.push("/"):r!==o&&c(o)}},{key:"render",value:function(){var e=this.props,t=e.searchLoading,n=e.searchResult,r=n&&n.authors,a=r?Object(z.jsxs)(L.a,{py:2,children:[Object(z.jsx)(ce.a,{variant:"h5",gutterBottom:!0,children:"Artistes"}),Object(z.jsx)(re.a,{container:!0,spacing:2,children:r.map((function(e){var t;return Object(z.jsx)(be,{name:e.name,avatarUrl:null===(t=e.largeImg)||void 0===t?void 0:t.url},"artist_"+e.id)}))})]}):"";return Object(z.jsxs)(z.Fragment,{children:[t&&Object(z.jsx)(ae.a,{color:"secondary"}),Object(z.jsx)(oe.a,{maxWidth:"xl",children:a})]})}}]),n}(r.Component),fe=Object(i.c)((function(e){return{searchInput:e.app.layout.appBar.search,searchLoading:e.app.search.loading,searchResult:e.app.search.result,searchError:e.app.search.error}}),(function(e){return{dispatchSearch:function(t){return e({type:U.a.SEARCH,search:t})},requestSeach:function(t){return function(e,t){var n={Authorization:"Bearer ".concat(localStorage.getItem(Ee.LOCAL_STORAGE.MYFEED_TOKEN)),"Content-Type":"application/json"};e({type:v,loading:!0}),fetch("".concat(Ee.MYSEED_API_URL,"/search/").concat(t),{method:"get",headers:n}).then((function(e){return e.json()})).then((function(t){"hydra:Error"===t["@type"]?e({type:g,error:t["hydra:description"]?t["hydra:description"]:"Une erreur est survenue."}):e({type:m,result:t}),e({type:v,loading:!1})}))}(e,t)}}}))(Object(I.a)((function(e){}))(je)),ve=["component","authed"];function me(e){var t=e.component,n=(e.authed,Object(X.a)(e,ve)),r=localStorage.getItem(Ee.LOCAL_STORAGE.SPOTIFY_TOKEN);return Object(z.jsx)($.b,Object(V.a)(Object(V.a)({},n),{},{render:function(e){return r?Object(z.jsx)(t,Object(V.a)({},e)):Object(z.jsx)($.a,{to:{pathname:"/login",state:{from:e.location}}})}}))}var ge=[Object(z.jsx)($.b,{path:"/login",component:Q.a},"route_login"),Object(z.jsx)(me,{path:"/",exact:!0,component:ne},"route_home"),Object(z.jsx)(me,{path:"/search",component:fe},"route_search")],ye=n.p+"static/media/woman_looking_through_records_at_vinyl_shop.a2443996.jpg",Se=function(e){Object(E.a)(n,e);var t=Object(C.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return Object(x.a)(n,[{key:"render",value:function(){var e=this.props,t=e.layoutVisible,n=e.fullSizeBgImg,r=e.classes;return Object(z.jsxs)("div",{className:n&&r.rootFullSizeBgImg,children:[Object(z.jsx)(J,{}),t&&Object(z.jsxs)("div",{children:[Object(z.jsx)(G,{}),Object(z.jsx)(Y.a,{})]}),Object(z.jsx)($.d,{children:ge})]})}}]),n}(r.Component),_e=Object(i.c)((function(e){return{layoutVisible:e.app.layout.visible}}),null)(Object(I.a)((function(){return{rootFullSizeBgImg:{height:"100vh",backgroundImage:"url("+ye+")",backgroundPosition:"center center",backgroundRepeat:"no-repeat",backgroundAttachment:"fixed",backgroundSize:"cover"}}}))(Se)),xe="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__||c.c,Ee={LOCAL_STORAGE:{SPOTIFY_TOKEN:"APP_CONST_LOCAL_STORAGE_SPOTIFY_TOKEN",SPOTIFY_REFRESH_TOKEN:"APP_CONST_LOCAL_STORAGE_SPOTIFY_REFRESH_TOKEN"}},Ce=Object(l.a)(),Te=Object(c.d)(Object(c.b)({app:S,router:Object(p.b)(Ce),form:u.a,composeEnhancers:xe}),Object(c.a)(Object(h.a)(Ce),s.a));o.a.render(Object(z.jsx)(i.a,{store:Te,children:Object(z.jsxs)(p.a,{history:Ce,children:[Object(z.jsx)(j.a,{}),Object(z.jsx)(d.a,{theme:b,children:Object(z.jsx)(_e,{})})]})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},37:function(e,t,n){"use strict";n.d(t,"b",(function(){return i}));var r=n(23),a=n(69),o=n(70),c=n(39),i={VISIBLE:"LAYOUT_VISIBLE_STATE",FULL_SIZE_CONTENT:"FULL_SIZE_CONTENT"};t.a=Object(r.b)({visible:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;return t.type===i.VISIBLE?t.visible:e},fullSizeContent:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;return t.type===i.FULL_SIZE_CONTENT?t.fullSizeContent:e},appBar:a.b,drawer:o.a,snackBar:c.a})},39:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o}));var r=n(23),a={default:"default",info:"info",success:"success",error:"error"},o={severity:"SNACKBAR_SEVERITY",message:"SNACKBAR_MESSAGE",isOpen:"SNACKBAR_IS_OPEN"};t.a=Object(r.b)({severity:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return t.type===o.severity?t.severity:e},message:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return t.type===o.message?t.message:e},isOpen:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return t.type===o.isOpen?t.isOpen:e}})},69:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(23),a={SEARCH:"APP_BAR_SEARCH"};t.b=Object(r.b)({search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return t.type===a.SEARCH?t.search:e}})},70:function(e,t,n){"use strict";n.d(t,"b",(function(){return a}));var r=n(23),a={OPEN:"DRAWER_OPEN_STATE"};t.a=Object(r.b)({open:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return t.type===a.OPEN?t.open:e}})}},[[33,1,2]]]);
//# sourceMappingURL=main.48c06fef.chunk.js.map